(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{397:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("Fetch API 提供了一个获取资源的接口（包括跨域），在功能上与 XMLHttpRequest 有很多相似的地方，但被设计成更具可扩展性和高效性")]),t._v(" "),s("p",[t._v("Fetch 的核心在于对 HTTP 接口的抽象，包括 Request、Response、Headers、Body，以及用于初始化异步请求的 global fetch。得益于 JavaScript 实现的这些抽象好的 HTTP 模块，其他接口能够很方便的使用这些功能。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),s("p",[t._v("Guard 事 Headers 对象的特征。")]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("当创建 Request 和 Response 对象的时候，它将拥有一个按照以下规则实现的与之相关联的 Headers 对象。")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("每个 Headers 类包含一个 Headers 列表，它的初始值为空或者零个或多个键值对。")]),t._v(" "),t._m(9),t._v(" "),t._m(10),s("p",[t._v("也可以是个对象。")]),t._v(" "),t._m(11),t._m(12),t._v(" "),s("p",[t._v("Request 对象是 FetchAPI 的资源请求对象。")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),s("p",[t._v("Fetch mixin 对象，提供了关联 response/request 中 body 的方法，可以定义它的文档类型以及请求如何被处理。")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("Request 对象是 FetchAPI 的资源响应对象。")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("参考资料：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN web docs：Fetch API"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.cnblogs.com/wonyun/p/fetch_polyfill_timeout_jsonp_cookie_progress.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetch 使用的常见问题及解决办法"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000007019545",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetch 用法说明"),s("OutboundLink")],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"fetch-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fetch-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Fetch API")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("PC 浏览器兼容性")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("Chrome")]),t._v(" "),s("th",[t._v("Opera")]),t._v(" "),s("th",[t._v("Firefox")]),t._v(" "),s("th",[t._v("IE")]),t._v(" "),s("th",[t._v("Edge")]),t._v(" "),s("th",[t._v("Safari")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("42")]),t._v(" "),s("td",[t._v("29")]),t._v(" "),s("td",[t._v("39")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("14")]),t._v(" "),s("td",[t._v("10.1")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Mobile 浏览器兼容性")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("iOS Safari")]),t._v(" "),s("th",[t._v("Opera Mobile")]),t._v(" "),s("th",[t._v("Opera Mini")]),t._v(" "),s("th",[t._v("Android")]),t._v(" "),s("th",[t._v("Android Chrome")]),t._v(" "),s("th",[t._v("Android Firefox")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("10.3")]),t._v(" "),s("td",[t._v("46")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("67")]),t._v(" "),s("td",[t._v("70")]),t._v(" "),s("td",[t._v("63")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"guard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#guard","aria-hidden":"true"}},[this._v("#")]),this._v(" Guard")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("当使用 "),e("code",[this._v("Headers()")]),this._v(" 构造函数创建一个新的 Headers 对象的时候，它的 Guard 被设置成 "),e("code",[this._v("none")]),this._v("（默认值）。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#headers","aria-hidden":"true"}},[this._v("#")]),this._v(" Headers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Headers 类（请求头对象）能用于对 HTTP "),e("code",[this._v("request")]),this._v(" 和 "),e("code",[this._v("response")]),this._v(" 的检索、设置、添加和删除等各种操作。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("方法")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("append()")])]),t._v(" "),s("td",[t._v("添加一个 header 信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("delete()")])]),t._v(" "),s("td",[t._v("删除指定的 header")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("entries()")])]),t._v(" "),s("td",[t._v("返回 header 对象中的所有键值对，是一个 Iterator 对象")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("get()")])]),t._v(" "),s("td",[t._v("从 Headers 对象中返回指定的值")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("getAll()")])]),t._v(" "),s("td",[t._v("获取所有的 header")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("has()")])]),t._v(" "),s("td",[t._v("检测指定的 header 的键，返回布尔值")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("keys()")])]),t._v(" "),s("td",[t._v("获取所有 header 的键，是一个 Iterator 对象")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("set()")])]),t._v(" "),s("td",[t._v("修改或添加 header")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("values()")])]),t._v(" "),s("td",[t._v("获取所有 header 的值，是一个 Iterator 对象")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" content "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello world!'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" reqHeaders "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Headers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nreqHeaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nreqHeaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nreqHeaders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Custom-Header'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ProcessThisImmediately'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reqHeaders "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Headers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Length"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-Custom-Header"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ProcessThisImmediately"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request","aria-hidden":"true"}},[this._v("#")]),this._v(" Request")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("Request")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("(")]),this._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(",")]),this._v(" options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("url")])]),t._v(" "),s("td",[t._v("请求URL")]),t._v(" "),s("td",[t._v("string")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("options")])]),t._v(" "),s("td",[t._v("配置对象")]),t._v(" "),s("td",[t._v("object")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"属性方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#属性方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 属性方法")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("method")])]),t._v(" "),s("td",[t._v("请求方法")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("url")])]),t._v(" "),s("td",[t._v("请求地址")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("headers")])]),t._v(" "),s("td",[t._v("请求头（可是 Headers 对象，可以是对象）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("context")])]),t._v(" "),s("td",[t._v("请求上下文")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("referrer")])]),t._v(" "),s("td",[t._v("指定请求源地址")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("mode")])]),t._v(" "),s("td",[t._v("请求模式（是跨域 cors 还是正常 no-cors）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("credentials")])]),t._v(" "),s("td",[t._v("跨域请求时，是否携带 Cookie 信息（omit 跨域携带/sam-origin 同源携带）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("redirect")])]),t._v(" "),s("td",[t._v("重定向")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("integrity")])]),t._v(" "),s("td",[t._v("一个散列值，用于检验请求资源的完整性")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("cache")])]),t._v(" "),s("td",[t._v("是否缓存这个资源")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",[e("thead",[e("tr",[e("th",[this._v("方法")]),this._v(" "),e("th",[this._v("说明")])])]),this._v(" "),e("tbody",[e("tr",[e("td",[e("code",[this._v("clone()")])]),this._v(" "),e("td",[this._v("复制一个当前 Request 对象的实例")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例","aria-hidden":"true"}},[this._v("#")]),this._v(" 示例")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requst "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tbody"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login-form'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tcache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#body","aria-hidden":"true"}},[this._v("#")]),this._v(" Body")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("Request")]),this._v(" 和 "),e("code",[this._v("Response")]),this._v(" 对象都实现了Body的接口，所以都拥有Body的方法和属性，用于指定请求体中的body或响应体的内容的数据类型（"),e("code",[this._v("arrayBuffer/blob /json/text")]),this._v(") 主要是做数据类型的转换。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",[e("thead",[e("tr",[e("th",[this._v("属性")]),this._v(" "),e("th",[this._v("说明")])])]),this._v(" "),e("tbody",[e("tr",[e("td",[e("code",[this._v("bodyUsed")])]),this._v(" "),e("td",[this._v("用于判断是否在响应体中是否设置过 body 读取类型")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("方法")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("arrayBuffer()")])]),t._v(" "),s("td",[t._v("将响应流转换为 Buffer 数组的 Promise 对象，并将 "),s("code",[t._v("bodyUsed")]),t._v(" 状态改为已使用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("blob()")])]),t._v(" "),s("td",[t._v("将响应流转换为大的二进制的 Promise 对象，并将 "),s("code",[t._v("bodyUsed")]),t._v("  状态改为已使用，一般用于文件读取（下载大文件或视频）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("formData()")])]),t._v(" "),s("td",[t._v("将响应流转换为 formData 的 Promise 对象，并将 "),s("code",[t._v("bodyUsed")]),t._v(" 状态改为已使用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("json()")])]),t._v(" "),s("td",[t._v("将响应流转换为 json 的 Promise 对象，并将 "),s("code",[t._v("bodyUsed")]),t._v(" 状态改为已使用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("text()")])]),t._v(" "),s("td",[t._v("将响应流转换为文本字符串的 Promise 对象，并将 "),s("code",[t._v("bodyUsed")]),t._v(" 状态改为已使用")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response","aria-hidden":"true"}},[this._v("#")]),this._v(" Response")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("属性（只读）")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("type")])]),t._v(" "),s("td",[t._v("响应的类型 basic/cors 等")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("url")])]),t._v(" "),s("td",[t._v("包含 Response 的 URL")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("useFinalURL")])]),t._v(" "),s("td",[t._v("包含了一个布尔值来标示这是否是该 Response 的最终 URL")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("status")])]),t._v(" "),s("td",[t._v("响应码")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ok")])]),t._v(" "),s("td",[t._v("表示响应成功")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("statusText")])]),t._v(" "),s("td",[t._v("状态码信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("headers")])]),t._v(" "),s("td",[t._v("响应头的 Headers 对象")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("bodyUsed")])]),t._v(" "),s("td",[t._v("是否设置过响应内容的类型")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("方法")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("clone()")])]),t._v(" "),s("td",[t._v("创建一个 Response 对象的克隆")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("error()")])]),t._v(" "),s("td",[t._v("返回一个绑定了网络错误的新的 Response 对象")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("redirect()")])]),t._v(" "),s("td",[t._v("用另一个 URL 创建一个新的 Response")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"fetch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fetch","aria-hidden":"true"}},[this._v("#")]),this._v(" fetch()")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("fetch()")]),this._v(" 方法用于发起获取资源的请求，它返回一个 Promise 对象，这个 Promise 对象会在请求响应后将状态变更为 Resolved，并返回 Response 对象。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"示例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 示例")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api/data.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求类型")]),t._v("\n    headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求头")]),t._v("\n    body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求体")]),t._v("\n    mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求模式")]),t._v("\n    credentials"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Cookie的跨域策略")]),t._v("\n    cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求的Cache模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mode","aria-hidden":"true"}},[this._v("#")]),this._v(" mode")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("no-cors")]),t._v("：允许来自 CDN 的脚本、其他域的图片和其他一些跨域资源，但是首先有个前提条件，就是请求的 "),s("code",[t._v("method")]),t._v(" 只能是 HEAD、GET 或者 POST。此外，任何 ServiceWorkers 拦截了这些请求，它不能随意添加或者改写任何 "),s("code",[t._v("header")]),t._v("。其次，JavaScript 不能访问 Response 中的任何属性，这保证了 ServiceWorkers 不会导致任何跨域下的安全问题而隐私信息泄漏。")]),t._v(" "),s("li",[s("code",[t._v("cors")]),t._v("：通常用作跨域请求来从第三方提供的 API 获取数据。这个模式遵守 CORS 协议。只有有限的一些 "),s("code",[t._v("header")]),t._v(" 被暴露给 Response 对象，但是 "),s("code",[t._v("body")]),t._v(" 是可读的。")]),t._v(" "),s("li",[s("code",[t._v("same-origin")]),t._v("：如果一个请求是跨域的，那么返回一个简单的 "),s("code",[t._v("error")]),t._v("，这样确保所有的请求遵守同源策略。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"cache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cache","aria-hidden":"true"}},[this._v("#")]),this._v(" cache")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("default")]),t._v("：缓存相同的请求")]),t._v(" "),s("li",[s("code",[t._v("no-store")]),t._v("：不缓存任何请求")]),t._v(" "),s("li",[s("code",[t._v("reload")]),t._v("：创建一个正常的请求，并用响应更新 HTTP 缓存")]),t._v(" "),s("li",[s("code",[t._v("no-cache")]),t._v("：如果 HTTP 缓存中有响应，并且不是正常请求，则 Fetch 创建条件请求。然后，它使用响应更新 HTTP 缓存。")]),t._v(" "),s("li",[s("code",[t._v("force-cache")]),t._v("：Fetch 使用 HTTP 缓存中与请求匹配的任何响应，不管是否过期。如果没有响应，则会创建正常请求，并使用响应更新 HTTP 缓存。")]),t._v(" "),s("li",[s("code",[t._v("only-if-cached")]),t._v("：Fetch 使用 HTTP 缓存中与请求匹配的任何响应，不管是否过期。如果没有响应，则返回网络错误。 （只有当请求的模式为 "),s("code",[t._v("same-origin")]),t._v(" 时，才能使用任何缓存重定向，假设请求的重定向模式为 "),s("code",[t._v("follow")]),t._v("，重定向不会违反请求的模式）。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("如果 "),s("code",[t._v("header")]),t._v(" 中包含名称为 "),s("code",[t._v("If-Modified-Since")]),t._v("、"),s("code",[t._v("If-None-Match")]),t._v("、"),s("code",[t._v("If-Unmodified-Since")]),t._v("，"),s("code",[t._v("If-Match")]),t._v(" 和 "),s("code",[t._v("If-Range")]),t._v(" 之一，如果是 "),s("code",[t._v("default")]),t._v("，Fetch 会将 "),s("code",[t._v("cache")]),t._v(" 自动设置为 "),s("code",[t._v("no-store")]),t._v("。")])}],!1,null,null,null);e.default=n.exports}}]);